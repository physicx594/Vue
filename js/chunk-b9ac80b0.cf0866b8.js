(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b9ac80b0"],{"0ab9":function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"CheckoutPay"},[o("Navbar"),t.$store.state.isLoading?t._e():o("div",{staticClass:"container"},[o("div",{staticClass:"row"},[o("CheckoutNav",{attrs:{step1:t.step,step2:t.step,step3:t.step}}),o("div",{staticClass:"cartList p-3"},[o("div",{staticClass:"text-center"},[t.tempProduct.total?o("div",[t._v("合計"+t._s(t._f("money")(t.tempProduct.total)))]):t._e(),t.tempProduct.products?o("span",{staticStyle:{"font-size":"13px"}},[t._v("購物車("+t._s(t.tempProduct.products.length)+"件)")]):t._e(),o("span",{staticClass:"arrowDown",on:{click:function(e){t.open=!t.open}}},[o("i",{staticClass:"fa fa-angle-down text-danger",class:{open:t.open}})])])]),o("div",{staticClass:"opensection w-100",class:{open:t.open}},[o("table",{staticClass:"table mb-0 table-borderless border border-top-0"},[t._m(0),o("tbody",t._l(t.tempProduct.products,(function(e,a){return o("tr",{key:a,attrs:{scope:"row"}},[o("td",{staticClass:"pic"},[o("img",{staticClass:"img-fluid",attrs:{src:e.product.imageUrl[0]}})]),o("td",[t._v(t._s(e.product.title))]),o("td",[t._v("x"+t._s(e.qty))]),e.product.price?o("td",[t._v(t._s(t._f("money")(e.product.price*e.qty)))]):t._e()])})),0),o("tfoot",[o("tr",[o("td",{staticClass:"text-right",attrs:{colspan:"2"}},[o("i",{staticClass:"fa fa-angle-up fa-2x text-danger",on:{click:function(e){t.open=!t.open}}})]),o("th",[t._v("合計")]),t.tempProduct.total?o("th",{staticClass:"text-danger"},[t._v(t._s(t._f("money")(t.tempProduct.total)))]):t._e()])])])]),o("div",{staticClass:"orderInfo mt-5"},[o("div",{staticClass:"header"},[t._v("訂單資訊 "),t.tempProduct.id?o("h6",{staticClass:"float-right pt-1"},[t._v(t._s(t._f("orderId")(t.tempProduct.id)))]):t._e()]),o("table",{staticClass:"table m-0"},[t.tempProduct.user?o("tbody",[o("tr",[o("td",[t._v("姓名")]),o("td",[t._v(t._s(t.tempProduct.user.name))])]),o("tr",[o("td",[t._v("電話")]),o("td",[t._v(t._s(t.tempProduct.user.tel))])]),o("tr",[o("td",[t._v("Email")]),o("td",[t._v(t._s(t.tempProduct.user.email))])]),o("tr",[o("td",[t._v("地址")]),o("td",[t._v(t._s(t.tempProduct.user.address))])]),o("tr",[o("td",[t._v("付款方式")]),o("td",[t._v(t._s(t.tempProduct.payment))])]),o("tr",[o("td",[t._v("付款狀態")]),o("td",{staticClass:"text-danger font-weight-bold"},[t._v(t._s(t.tempProduct.is_paid))])])]):t._e()]),o("div",{staticClass:"pay"},[o("router-link",{attrs:{to:"/CheckoutSuccess"}},[o("button",{staticClass:"btn btn-success d-block w-100",attrs:{type:"button"},on:{click:t.paying}},[t._v("確定付款")])])],1)])],1)]),o("Footer")],1)},s=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("thead",{staticClass:"table"},[o("tr",{attrs:{scope:"row"}},[o("th"),o("th",[t._v("品名")]),o("th",[t._v("單價")]),o("th",[t._v("小計")])])])}],r=(o("99af"),o("bebf")),i=o("acd4"),c=o("7271"),n={name:"CheckoutPay",components:{Navbar:r["a"],Footer:i["a"],CheckoutNav:c["a"]},data:function(){return{tempProduct:{},step:!0,open:!1}},methods:{getOrder:function(t){var e=this;console.log(t),this.$store.dispatch("updateLoading",!0);var o="".concat("https://ec-course-api.hexschool.io/v2","/api/").concat("healthy-diet","/order/").concat(t);this.axios.get(o).then((function(t){e.tempProduct=t.data.order,!1===e.tempProduct.is_paid?e.tempProduct.is_paid="未付款":e.tempProduct.is_paid="已付款",e.$store.dispatch("getCart"),e.$store.dispatch("updateLoading",!1)})).catch((function(t){console.log(t),e.$store.dispatch("updateLoading",!1)}))},getOrders:function(){var t="".concat("https://ec-course-api.hexschool.io/v2","/api/").concat("healthy-diet","/orders");this.axios.get(t).then((function(t){console.log(t)}))},paying:function(){var t=this,e=this.tempProduct.id,o="".concat("https://ec-course-api.hexschool.io/v2","/api/").concat("healthy-diet","/pay/").concat(e);this.axios.post(o).then((function(o){console.log(o),t.getOrder(e)}))}},computed:{isLoading:function(){return this.$store.state.isLoading}},created:function(){var t=this;this.$store.dispatch("updateLoading",!0),this.$bus.$on("orderId",(function(e){t.getOrder(e)}))},beforeDestroy:function(){this.$bus.$off("orderId")}},d=n,p=(o("a15d"),o("2877")),u=Object(p["a"])(d,a,s,!1,null,null,null);e["default"]=u.exports},2639:function(t,e,o){var a=o("40aa");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var s=o("499e").default;s("492447c4",a,!0,{sourceMap:!1,shadowMode:!1})},"40aa":function(t,e,o){var a=o("24fb");e=a(!1),e.push([t.i,".CheckoutPay{counter-reset:step}.CheckoutPay .cartList{position:relative;width:100%;border:1px solid #ededed}.CheckoutPay .cartList .arrowDown{position:absolute;top:50%;left:56%;transform:translateY(-50%);padding:20px;cursor:pointer}.CheckoutPay .cartList .arrowDown i{transition:.5s}.CheckoutPay .cartList .arrowDown i.open{transition:.5s;transform:rotate(180deg)}.CheckoutPay .opensection{height:0;overflow:hidden;transition:all .5s ease-out}.CheckoutPay .opensection table{font-size:16px}.CheckoutPay .opensection table tr{border-bottom:1px solid #ededed;position:relative}.CheckoutPay .opensection table tr .fa-angle-up{margin-right:90px;left:50%;cursor:pointer}.CheckoutPay .opensection table img{width:80px;height:80px}.CheckoutPay .opensection.open{height:529px}.CheckoutPay .orderInfo{position:relative;width:100%;margin:0 auto 96px;border:1px solid #ededed;font-size:13px}.CheckoutPay .orderInfo .form-control-plaintext{border-bottom:1px solid #000}.CheckoutPay .orderInfo .pay{position:absolute;right:0;bottom:-43px}.CheckoutPay .orderInfo table{opacity:1}",""]),t.exports=e},a15d:function(t,e,o){"use strict";var a=o("2639"),s=o.n(a);s.a}}]);
//# sourceMappingURL=chunk-b9ac80b0.cf0866b8.js.map